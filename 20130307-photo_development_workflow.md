# ピューロランド写真の現像ワークフロー

たいていの人はピューロランドで撮った写真をアップロードするのがその場か帰宅直後であるのに対して、お前は何で翌日にずれ込むのだ、と突っ込まれたので、撮影からアップロードまでのワークフローを文章にして言い訳を。念のため、突っ込みを入れた人は今日の帰りがけに会話をした人ではないです。

ワークフローはパイプライン的に進めていくので、前後の作業が同時に行われていることがある。数字は目安。

## 撮影

ピューロランド1日につき800枚ほど RAW で撮影する。

ピューロランドは照明の色が時々刻々と変わるので、ホワイトバランスを撮影時点で指定するのは自分には無理。よって RAW にならざる得ない。また自分の腕では歩留まりが悪いので数撃つ必要がある。動いている場面を撮ることが多く明るさも暗いため、オートフォーカスの的中率も低いし被写体ぶれも多い。

## アップロードまで

### 選定1

カメラ本体の背面液晶で確認して400枚ほど削除し400枚にする。

待ち時間や電車内でカメラ本体の背面液晶で確認して、いらない写真を削除する。背面液晶では確認しにくいのであまり選定はできない。特にピントが合っているかは背面液晶ではわからない。

### インポート

400枚をメモリカードからPCに移す。

[Windows Live Photo Gallery](http://photogallery.live.com/) を使って全件インポートしてメモリカードから全件削除する。ほっとけば終わる。

### 現像1

400枚をそのまま現像する。

次の選定のために [Digital Photo Professional (DPP)](http://cweb.canon.jp/camera/dpp/) で現像のレシピ設定を一切せずに現像する。1枚当たり30秒から1分くらいかかるが、ほっとけば終わる。

### 選定2

現像1で出力された JPEG を見て400枚を120枚くらいにまで削る。

RAW ではなく JPEG なので素早くプレビューできるようになっているので JPEG を見て選定を行っていく。ここでも DPP を使う。同じ表示倍率のままで同じ場所を比較しやすいので、ピント確認がしやすい。数字キー一発でレーティングができるのでそれを駆使しながら。人手になるのでかなり時間がかかる。

### 現像設定

120枚に対して現像設定を行う。

選定2で残った120枚に対して DPP で現像設定を行っていく。人手なのでかなり時間がかかる。

たいていの写真には [Digital Lens Optimizer (DLO)](http://cweb.canon.jp/eos/special/dlo/) を適用する。DLO の適用自体には1枚当たり30秒から1分くらいだが、DLO の適用量を決めるのは人手になるのでもっと時間がかかる。なのでたいていはプレビューせずに適用量 50 で一括適用している。DLO 適用後にはアンシャープマスクの設定見直しが必要なので、また時間がかかる。

### 現像2

120枚を現像する。

DPP で現像する。ほっとけば終わる。現像1と同じく1枚当たり30秒から1分くらいかかる。

### 選定3

現像された JPEG を見て100枚くらいに絞る。

現像してみたけれどもいまいちだなあというのも当然あるので、それらを削除する。ここでの選定は縮小アルゴリズムの好みにより Windows Live Photo Gallery で行う。

### ジオタグ付加

JPEG にジオタグをつける。

ピューロランドは GPS が使えない屋内であること、フロア構造が単純ではないこと、の理由から正確な場所がわからないので手作業で適当にジオタグを付ける。Google Maps が屋内にも対応するようになったので、ピューロランドも館内の地図を提供してほしいなあと。

ソフトウェアは [GeoSetter](http://www.geosetter.de/en/) を用いている。以前は [Picasa のクライアントアプリ](http://picasa.google.com/)を使っていたが、複数の写真にまとめて設定することが困難、Exif の一部を消してくれることがあるような気がする、という理由で GeoSetter に乗り換えた。

### 縮小とボカシ処理

アップロード用に縮小とお客さんの顔のボカシ処理を行う。

元のサイズが 5760x3840 なので、縦横を4分の1にした 1440x960 に Windows Live Photo Gallery でリサイズする。お客さんの顔が写っている場合には [Paint.NET](http://www.getpaint.net/) でボカシを入れる。Paint.NET で保存すると Exif が一部消えてしまうので、他にいいのがあれば教えてください。

### アップロード

縮小とボカシ処理が済んだ写真を [Picasa Web Album](https://picasaweb.google.com/) にアップロードする。

Web ブラウザで複数ファイルの一括アップロードがパラレルでできるようになっていたので Web ブラウザからアップロードしていたが、パラレルでアップロードするとアップロード順が時刻順にならないことがある。Android の Gallery アプリケーションでの Picasa Web Album の表示順序が Picasa Web Album で設定した表示順ではなく単なるアップロード順で表示されるので、パラレルでアップロードされると順番が狂う。そのためシーケンシャルにアップロードしてくれる [PlayMemories Home](http://www.sony.jp/camera/playmemories/home.html) を使ってアップロードしている。もっと軽量なアップロードクライアントがあれば教えてください。

## アップロード以降

上記でアップロードは完了しているが、ローカルの写真用の手順がまだ一部残っているので参考までに。

### ジオタグ以外のメタデータ付け

ピープルタグ、タグ、レーティング、デスクリプションを付ける。

Windows Live Photo Gallery を使う。[ピープルタグについては以前書いた](http://ameblo.jp/ohtaket/entry-11421001365.html)。タグは Windows および Windows Live Photo Gallery の階層型タグが気に入っている。レーティングとデスクリプションは適当に。

### 壁紙用トリミング

職場PC用の壁紙に使うために 3200x1200 でトリミングできそうな写真があればトリミングする。

[1600x1200 の2枚のディスプレイを横に並べている](https://twitter.com/ohtaket/status/176875646956486656)ため、3200x1200 の縦中央で写真が切れてしまう。中央にキャラクターを配置して撮影することが少ないのは、後に壁紙に使うことを想定していることも理由の一つであったりする。

トリミングには DPP を使う。トリミング領域の指定を行った後にまとめて書き出しができるので便利。

## まとめ

このようなワークフローとなっているため、申し訳ないが当日中に現像を終えられることがまずできない。ゆくゆくは以下の改善案で早くアップロードできるようにしていきたい。

* RAW で記録するのではなく RAW+JPEG で記録する。これにより現像1の手間をなくせる。カード容量を浪費したり、バッファがあふれやすくなるので、ちと考え物ではある。
* 現像マシンを新調する。これにより現像や DLO にかかる時間が短縮される。もう5年も前の Core 2 Quad マシンなのでそろそろ替え時かも。
* 撮影枚数を少なくする。数撃たないと当たらないから無理でしょうね。

まあ、こんな文章書いている暇があったらさっさとシナモン誕生日の写真を現像しろってことです。
